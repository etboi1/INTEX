<!-- Joaquin Elizalde, Emma Frederick, Ethan Grundvig, Joshua Solano -->
<!-- Managers view and filter all registrations -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Registrations</title>

    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/viewStyles.css">
</head>

<body>

    <!-- NAVBAR -->
    <div class="navbar">
        <div class="brand">Ella Rises</div>
        <div>
            <a href="/">Home</a>
            <a href="/logout">Log Out</a>
        </div>
    </div>

    <a href="/" class="back-btn">‚Üê Back to Home</a>

    <div class="container">
        <h1>All Registrations</h1>

        <!-- Add Button at Top -->
        <a href="/addRegistration" class="back-btn" style="margin:10px auto 25px auto; display:block; text-align:center;">
            + Add New Registration
        </a>

        <% if (error_message) { %>
            <div class="error-box"><%= error_message %></div>
        <% } %>

        <table style="width:100%; border-collapse: collapse;">
            <thead>
                <tr style="border-bottom:2px solid #FFD8D1;">
                    <th style="padding:10px;">Name</th>
                    <th style="padding:10px;">Email</th>
                    <th style="padding:10px;">Event</th>
                    <th style="padding:10px;">Status</th>
                    <th style="padding:10px;">Registered On</th>
                    <th style="padding:10px;">Edit</th>
                </tr>
            </thead>

            <tbody>
                <% registrations.forEach(r => { %>
                    <tr style="border-bottom:1px solid #FFE5E2;">
                        <td style="padding:10px;">
                            <%= r.part_first_name %> <%= r.part_last_name %>
                        </td>

                        <td style="padding:10px;"><%= r.part_email %></td>

                        <td style="padding:10px;"><%= r.event_name %></td>

                        <td style="padding:10px;">
                            <% if (r.reg_status === "r") { %>
                                Registered
                            <% } else if (r.reg_status === "a") { %>
                                Attended
                            <% } else if (r.reg_status === "n") { %>
                                No-Show
                            <% } else if (r.reg_status === "c") { %>
                                Cancelled
                            <% } else { %>
                                <%= r.reg_status %>
                            <% } %>
                        </td>

                        <td style="padding:10px;">
                            <%= new Date(r.reg_created_at).toLocaleDateString() %>
                        </td>

                        <td style="padding:10px;">
                            <a class="action-btn"  href="/editRegistration/<%= r.reg_id %>">Edit</a>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>

    </div>

</body>
</html>
